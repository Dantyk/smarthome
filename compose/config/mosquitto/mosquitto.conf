allow_anonymous true

# Standard MQTT protocol
listener 1883 0.0.0.0

# WebSocket support for web clients (Next.js UI)
listener 9001 0.0.0.0
protocol websockets

# Persistence configuration
persistence true
persistence_location /mosquitto/data/
autosave_interval 60
autosave_on_changes false
persistent_client_expiration 1d

# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
# Security (LAN-only deployment)
# ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

# Password authentication
password_file /mosquitto/config/passwords

# Access Control List (topic-level permissions)
acl_file /mosquitto/config/acl.conf

# Logging
log_dest stdout
log_type error
log_type warning
log_type notice
log_timestamp true
log_timestamp_format %Y-%m-%dT%H:%M:%S
